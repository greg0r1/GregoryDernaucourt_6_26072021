{"mappings":"grBACA,IAAAA,EAAAC,EAAAC,EAAA,UACAC,EAAAF,EAAAC,EAAA,UACAE,EAAAH,EAAAC,EAAA,6DACa,IAAIG,EAAAA,QAAjB,MAgBMC,EAAoB,WAA2B,IAAvBC,EAAuBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAA,GACjD,MAAMG,EAAUC,SAASC,eAAT,WAChBF,EAAQG,UAAR,gBACAH,EAAQI,UAAR,4IAAAC,OAMMT,EAAcU,KAAIC,IAAA,IAAAC,GAAGA,EAAFC,SAAMA,EAANC,KAAgBA,EAAhBC,KAAsBA,EAAtBC,QAA4BA,EAA5BC,QAAqCA,EAArCC,MAA8CA,EAA9CC,KAAqDA,GAArDR,SACrBS,EAAOR,EAAIC,EAAUC,IAAf,mGAANL,OAE+DK,EAF/D,iFAAAL,OAIuBG,EAJvB,0NAAAH,OAS2CK,EAT3C,wGAAAL,OAYkCM,EAZlC,MAAAN,OAY2CO,EAZ3C,iDAAAP,OAaiCQ,EAbjC,2CAAAR,OAc2BS,EAd3B,0GAAAT,OAkBUU,EAAKT,KAAKW,GAAD,6EAAAZ,OAEqBY,EAFrB,2BAAAZ,OAEkDY,EAFlD,oBAAAZ,OAEwEY,EAFxE,qCAGCC,KAHV,IAAA,gFAQZA,KA3BI,IAAA,+BAyCV,SACSC,EAAYC,EAAaH,GAE9BI,EAAAA,QAAaC,gBAAgBC,IACzB,MAAMC,EAAqBD,EAAQE,aAAR,SACrBC,EAAsBN,EAAYO,uBAAuBH,GAC/D7B,EAAqB+B,GACrBP,EAAYC,GAEZQ,EAA+BR,GAE/BnB,SAAS4B,MAAT,aAAAxB,OAA8BmB,EAAmBM,OAAO,GAAGC,eAA3D1B,OAA2EmB,EAAmBQ,MAAM,gBAInGhB,EAAOR,EAAIC,EAAUC,GAE1B,MAAMuB,EAAM,IAAIC,MAChBD,EAAIE,OAAJ,KACIlC,SAASC,eAAeM,GAAI4B,IAAMH,EAAIG,IACtCnC,SAASC,eAAeM,GAAI6B,MAAMC,MAAlC,QACArC,SAASC,eAAeM,GAAI+B,gBAA5B,UAEJN,EAAIG,IAAJ,uDAAmE3B,EAQvE,SACSmB,EAA+BR,GAEpCC,EAAAA,QAAamB,6BAA6BjB,IACtC,MAAMkB,EAAqBlB,EAAQmB,YAAYC,OACzCC,EAA0BH,EAAmBT,MAAM,EAAGS,EAAmBI,QAAnB,MACtDrC,EAAKY,EAAY0B,sBAAsBL,GAAoBjC,GAC3DuC,EAAM,IAAIC,IAAJ,wBAAA3C,OAAgCG,EAAGyC,WAAH,eAAhC5C,OAA2DuC,GAA2BM,UAClG3B,EAAQ4B,aAAR,OAA6BJ,MAuCtBK,IAAAA,EA/BQC,eAGf,MAAMjC,EAAc,IAAI1B,EAAAA,QAExB0B,EAAYkC,oBAEZlC,EAAYmC,aArHIxC,EAuHDK,EAAYoC,UAtH/BvD,SAASwD,cAAT,UAAiCrD,WAAjC,gHAAAC,OAGUU,EAAKT,KAAKW,GAAD,0EAAAZ,OAEcY,EAFd,2BAAAZ,OAE2CY,EAF3C,OAAAZ,OAEoDY,EAAIa,OAAO,GAAGC,eAFlE1B,OAEkFY,EAAIe,MAAM,GAAV,iCACjFd,KAHV,IAAA,uCAuHN,MACMD,EADS,IAAIyC,gBAAgBzD,SAASiD,SAASS,OAAOC,UAAU,IACnDC,IAAP,OACZlE,EAAqByB,EAAYO,uBAAuBV,IAExD6C,OAAOC,iBAAP,UAAA,IAAwCC,EAAAA,QAAiBC,YAAYhE,SAASwD,cAAT,0BAErEtC,EAAYC,GAEZQ,EAA+BR,GAnBnC,MAsBS8C,GAELC,QAAQD,MAAMA,GAxIF,IAAInD,GA6ITqC,0BCpJf,SAAA7D,EAAA","sources":["src/assets/js/main-photographers.js","src/assets/js/index.js"],"sourcesContent":["// Model\nimport DataService from './classes/DataService';\nimport EventService from './classes/EventService';\nimport EventScrollToTop from './classes/EventScrollToTop';\nconst data = new DataService;\n\n// View\nconst displayNavTags = (tags) => {\n    document.querySelector('header').innerHTML += `\n        <nav class=\"nav\" aria-label=\"Photographer categories\">\n            <ul class=\"tags\">\n            ${tags.map((tag) => `\n                <li class=\"tag\">\n                    <a title=\"Tag: ${tag}\" href=\"index.html?tag=${tag}\">#${tag.charAt(0).toUpperCase()}${tag.slice(1)}</a>\n                </li>`).join(\"\")}\n            </ul>\n        </nav>`\n\n}\n\nconst displayPhotographers = (photographers = []) => {\n    const section = document.getElementById('section');\n    section.classList = \"photographers\";\n    section.innerHTML = `\n    <header aria-label=\"Section header\">\n        <h1>Nos photographes</h1>\n    </header>\n        <div class=\"container\">\n\n        ${photographers.map(({ id, portrait, name, city, country, tagline, price, tags }) =>\n        loader(id, portrait, name) ||\n        `<article class=\"article\">\n            <a class=\"link-to-photographer\" tabindex=\"0\" aria-label=\"${name}\">\n                <div class=\"article__img\">\n                    <img id=\"${id}\" src=\"../../assets/images/loader.svg\" style=\"\n                    width: 50px;\n                    height: 50px;\n                \">\n                    </div>\n                <h2 class=\"article__title title\">${name}</h2>\n            </a>\n            <div class=\"details\">\n                <p class=\"localisation\">${city}, ${country}</p>\n                <p class=\"description\">${tagline}</p>\n                <p class=\"price\">${price}€/jour</p>\n            </div>\n            <div class=\"tags\">\n                <ul>\n                ${tags.map((tag) => `\n                    <li>\n                        <a class=\"tag\" title=\"${tag}\" href=\"index.html?tag=${tag}\" tabindex=\"0\">#${tag}</a>\n                    </li>`).join(\"\")}\n                </ul>\n            </div>\n        </article>\n        `\n    ).join(\"\")\n        }\n        </div>\n        `\n}\n\n\n\n// Scripts\n\n/**\n * Fonction pour gérer l'événement des tags\n *\n * @param {*} dataService\n */\nfunction eventOnTags(dataService, tag) {\n    // On ajoute l'événement \"click\" à l'élément \"tag\"\n    EventService.handleTagClick((element) => {\n        const nameAttributeOfTag = element.getAttribute('title');\n        const photographersByTags = dataService.getPhotographersByTags(nameAttributeOfTag);\n        displayPhotographers(photographersByTags);\n        eventOnTags(dataService);\n        // eventOnTags(dataService);\n        eventCickOnPhotographerProfile(dataService);\n        // On ajoute le tag au titre\n        document.title = `Fisheye | ${nameAttributeOfTag.charAt(0).toUpperCase()}${nameAttributeOfTag.slice(1)}`;\n    });\n}\n\nfunction loader(id, portrait, name) {\n    // <img src=\"assets/images/Sample_Photos/Photographers_ID_Photos/${portrait}\" alt=\"Portrait du photographe ${name}\">\n    const img = new Image();\n    img.onload = () => {\n        document.getElementById(id).src = img.src;\n        document.getElementById(id).style.width = \"unset\";\n        document.getElementById(id).removeAttribute('style')\n    };\n    img.src = 'assets/images/Sample_Photos/Photographers_ID_Photos/' + portrait;\n}\n\n/**\n * Fonction pour gérer l'événement clique de chaque fiche\n * de photographess\n *\n * @param {*} dataService\n */\nfunction eventCickOnPhotographerProfile(dataService) {\n    // On ajoute l'événement au \"click\" à chaque fiche de photographes\n    EventService.handlePhotographerSelection((element) => {\n        const nameOfPhotographer = element.textContent.trim();\n        const firstNameOfPhotographer = nameOfPhotographer.slice(0, nameOfPhotographer.indexOf(' '));\n        const id = dataService.getPhotographerByName(nameOfPhotographer).id;\n        const url = new URL(`photographer.html?id=${id.toString()}&firstName=${firstNameOfPhotographer}`, location);\n        element.setAttribute('href', url);\n    });\n}\n\n\n\n\n// Controller\nconst mainPhotographers = async () => {\n\n    try {\n        const dataService = new DataService();\n        // On récupère l'ensemble des photographes du Json\n        dataService.loadPhotographers();\n        // On récupère l'ensemble des médias des photographes du Json\n        dataService.loadMedias();\n        // On affiche la nav en récupérant tous les tags utilisés (getTags())\n        displayNavTags(dataService.getTags());\n        // On affiche les photographes en commençant par récupérer un paramètre dans l'url:\n        // s'il y a un tag dans l'url, alors on affiche une séléction par le tag transmis,\n        // sinon tous les photographes sont affichés\n        const params = new URLSearchParams(document.location.search.substring(1));\n        const tag = params.get(\"tag\");\n        displayPhotographers(dataService.getPhotographersByTags(tag));\n        // On ajoute un événement au scroll de window pour afficher un bouton scroll to top\n        window.addEventListener('scroll', () => EventScrollToTop.scrollToTop(document.querySelector('.scrollToMainButton')));\n        // On ajoute l'événement \"click\" à l'élément \"tag\"\n        eventOnTags(dataService);\n        // On ajoute l'événement \"click\" à chaque fiche de photographes\n        eventCickOnPhotographerProfile(dataService);\n\n\n    } catch (error) {\n\n        console.error(error)\n\n    }\n\n};\nexport default mainPhotographers();\n\n","import mainPhotographers from './main-photographers';\n"],"names":["$f7a970df03558f65$var$_DataService","$f7a970df03558f65$var$_interopRequireDefault","parcelRequire","$f7a970df03558f65$var$_EventService","$f7a970df03558f65$var$_EventScrollToTop","DataService","displayPhotographers","photographers","arguments","length","undefined","section","document","getElementById","classList","innerHTML","concat","map","_ref","id","portrait","name","city","country","tagline","price","tags","loader","tag","join","eventOnTags","dataService","EventService","handleTagClick","element","nameAttributeOfTag","getAttribute","photographersByTags","getPhotographersByTags","eventCickOnPhotographerProfile","title","charAt","toUpperCase","slice","img","Image","onload","src","style","width","removeAttribute","handlePhotographerSelection","nameOfPhotographer","textContent","trim","firstNameOfPhotographer","indexOf","getPhotographerByName","url","URL","toString","location","setAttribute","mainPhotographers","async","loadPhotographers","loadMedias","getTags","querySelector","URLSearchParams","search","substring","get","window","addEventListener","EventScrollToTop","scrollToTop","error","console"],"version":3,"file":"index.ca10f72f.js.map"}